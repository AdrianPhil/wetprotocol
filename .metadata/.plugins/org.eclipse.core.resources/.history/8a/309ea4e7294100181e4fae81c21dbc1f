package ui;

import java.awt.Component;

import javax.swing.*;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreeCellEditor;

import org.apache.jena.rdf.model.Literal;

import ont.OntologyManager;
import ont.PropertyValue;

public class PropertyCellEditor extends AbstractCellEditor implements TreeCellEditor {
	private JTextField val;
	private JLabel label;
	private JPanel panel;
	private PropertyValue propertyValue;

	@Override
	public Component getTreeCellEditorComponent(JTree tree, Object value, boolean isSelected, boolean expanded, boolean leaf, int row) {
		System.out.println("getTreeCellEditorComponent called");
		if (value != null && value instanceof DefaultMutableTreeNode) {
			Object userObject = ((DefaultMutableTreeNode) value).getUserObject();
			if (userObject instanceof PropertyValue) {
				propertyValue = (PropertyValue) userObject;
				if (propertyValue.getOntProperty().isDatatypeProperty() && propertyValue.getOntProperty().isLiteral()) {
					System.out.println("	if (propertyValue.getOntProperty().isDatatypeProperty() && propertyValue.getOntProperty().isLiteral()) {");
					label.setText(propertyValue.getValue().toString());// to check usage of the tostring
					val.setText(propertyValue.getValue().toString());
					panel.add(label);
					panel.add(val);
				}
			} else {
				UiUtils.showDialog(tree, "Uknown object type:" + value);
			}
		}
		return panel;
	}

	@Override
	public Object getCellEditorValue() {
		System.out.println("getCellEditorValue called");
		System.out.println();
		System.out.println("getCellEditoValue returns :" + val.getText());
		propertyValue.setValue(OntologyManager.getInstance().getTypedLiteral(val.getText()));
		return propertyValue;
	}
}