package ui;

import java.awt.Component;

import javax.swing.*;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreeCellEditor;

import org.apache.jena.rdf.model.Literal;

import ont.OntologyManager;
import ont.PropertyValue;

public class PropertyCellEdit extends AbstractCellEditor implements TreeCellEditor {
	private JTextField val;
	private JLabel label;
	private JPanel panel;
	private PropertyValue propertyValue;

	public Component getTreeCellEditorComponent(JTree tree, Object value, boolean isSelected, boolean expanded, boolean leaf, int row) {
		if (value != null && value instanceof DefaultMutableTreeNode) {
			Object userObject = ((DefaultMutableTreeNode) value).getUserObject();
			if (userObject instanceof PropertyValue) {
				propertyValue = (PropertyValue) userObject;
				label.setText(propertyValue.getValue().toString());// to check usage of the tostring
				val.setText(propertyValue.getValue().toString());
				panel.add(label);
				panel.add(val);
			} else {
				UiUtils.showDialog(tree, "Uknown object type:" + value);
			}
		}
		return panel;
	}

	public Object getCellEditorValue() {
		System.out.println("getCellEditoValue returns :" + val.getText());
		propertyValue.setValue(OntologyManager.getInstance().getTypedLiteral(val.getText())); 
		return propertyValue;
	}
}